<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Vega-Neutrino Example</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1000px;
      margin: 40px auto;
      padding: 20px;
    }
    h1 { color: #333; }
    .example-box {
      background: #f9f9f9;
      border: 1px solid #ddd;
      padding: 20px;
      margin: 20px 0;
      border-radius: 5px;
    }
    pre {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
    }
    #vis {
      margin: 20px 0;
    }
    .note {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h1>üöÄ Simple Vega-Neutrino Example</h1>
  
  <div class="note">
    <strong>Note:</strong> This is a conceptual example showing how to use vega-neutrino.
    To run this example, you need to build the vega-neutrino package first.
  </div>

  <div class="example-box">
    <h2>What is Vega-Neutrino?</h2>
    <p>
      Vega-Neutrino is a high-performance extension for Vega that enables visualization of
      datasets 10-100x larger than normal by using:
    </p>
    <ul>
      <li><strong>Columnar storage</strong> - 3-5x memory reduction</li>
      <li><strong>SIMD acceleration</strong> - 5-10x faster aggregations</li>
      <li><strong>Web Workers</strong> - Background processing for large datasets</li>
      <li><strong>.ntro format</strong> - Pre-compressed files load 10-50x faster</li>
    </ul>
  </div>

  <div class="example-box">
    <h2>Example: Sales Data Aggregation</h2>
    <p>This example shows a simple bar chart with Neutrino-accelerated aggregation:</p>
    
    <h3>Vega Spec with Neutrino</h3>
    <pre><code>{
  "data": [{
    "name": "sales",
    "url": "data/sales.csv",
    "format": {"type": "csv"},
    "neutrino": true  // ‚Üê Enable Neutrino for this dataset
  }],
  "transform": [{
    "type": "aggregate",  // ‚Üê Automatically accelerated by Neutrino
    "groupby": ["category"],
    "ops": ["sum", "mean"],
    "fields": ["amount", "amount"],
    "as": ["total", "average"]
  }],
  // ... marks, scales, axes
}</code></pre>

    <h3>JavaScript Usage</h3>
    <pre><code>import * as vega from 'vega';
import { enableNeutrino } from 'vega-neutrino';

// Parse and create view
const view = new vega.View(vega.parse(spec))
  .initialize('#vis');

// Enable Neutrino (async)
await enableNeutrino(view, {
  workerCount: 4,      // Number of worker threads
  threshold: 100000    // Use workers for datasets > 100K rows
});

// Run the visualization
await view.runAsync();</code></pre>
  </div>

  <div class="example-box">
    <h2>Loading .ntro Files</h2>
    <p>For production, pre-convert CSV to .ntro format for 10-50x faster loading:</p>
    
    <pre><code>{
  "data": [{
    "name": "sales",
    "url": "data/sales.ntro",  // ‚Üê Pre-compressed format
    "format": {"type": "neutrino"}
  }]
}</code></pre>

    <p><strong>Benefits:</strong></p>
    <ul>
      <li>1M rows: CSV ~5-10s ‚Üí .ntro ~100-200ms</li>
      <li>File size: 100MB CSV ‚Üí 5-15MB .ntro</li>
      <li>Automatic caching in IndexedDB</li>
    </ul>
  </div>

  <div class="example-box">
    <h2>Performance Comparison</h2>
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr style="background: #f0f0f0;">
          <th style="padding: 10px; text-align: left;">Dataset Size</th>
          <th style="padding: 10px; text-align: left;">Standard Vega</th>
          <th style="padding: 10px; text-align: left;">With Neutrino</th>
          <th style="padding: 10px; text-align: left;">Improvement</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding: 10px;">100K rows</td>
          <td style="padding: 10px;">200ms</td>
          <td style="padding: 10px;">40ms</td>
          <td style="padding: 10px; color: green; font-weight: bold;">5x faster</td>
        </tr>
        <tr style="background: #f9f9f9;">
          <td style="padding: 10px;">1M rows</td>
          <td style="padding: 10px;">2000ms</td>
          <td style="padding: 10px;">200ms</td>
          <td style="padding: 10px; color: green; font-weight: bold;">10x faster</td>
        </tr>
        <tr>
          <td style="padding: 10px;">10M rows</td>
          <td style="padding: 10px;">Out of Memory</td>
          <td style="padding: 10px;">2000ms</td>
          <td style="padding: 10px; color: green; font-weight: bold;">‚àû (works!)</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="example-box">
    <h2>Next Steps</h2>
    <ol>
      <li>Build the vega-neutrino package: <code>npm run build</code></li>
      <li>Try the interactive demo: <code>neutrino-demo.html</code></li>
      <li>Read the full documentation in <code>packages/vega-neutrino/README.md</code></li>
      <li>Check the implementation plan: <code>neutrino-vega-implementation-plan.md</code></li>
    </ol>
  </div>

</body>
</html>

